Title: Некоторые заметки о приведении типов в СиПлюсПлюс
Author: SergeM
Date: 2013-10-04 17:59:00
Slug: blog-post-2
Tags: c++,russian

<div dir="ltr" style="text-align: left;" trbidi="on"><span style="color: #333333; font-family: monospace;">АлёнаC++:</span>
[http://alenacpp.blogspot.ru/2005/08/c.html](http://alenacpp.blogspot.ru/2005/08/c.html)

<code style="background-color: white; color: #333333;">static_cast</code><span style="background-color: white; color: #333333; font-family: Georgia, serif; font-size: 13px;">&nbsp;между указателями корректно, только если один из указателей - это указатель на&nbsp;</span><code style="background-color: white; color: #333333;">void</code><span style="background-color: white; color: #333333; font-family: Georgia, serif; font-size: 13px;">&nbsp;или если это приведение между объектами классов, где один класс является наследником другого. То есть для приведения к какому-либо типу от&nbsp;</span><code style="background-color: white; color: #333333;">void*</code><span style="background-color: white; color: #333333; font-family: Georgia, serif; font-size: 13px;">, который возвращает&nbsp;</span><code style="background-color: white; color: #333333;">malloc</code><span style="background-color: white; color: #333333; font-family: Georgia, serif; font-size: 13px;">, следует использовать&nbsp;</span><code style="background-color: white; color: #333333;">static_cast</code><span style="background-color: white; color: #333333; font-family: Georgia, serif; font-size: 13px;">.</span>
<pre style="background-color: white; color: #333333;"><code class="cpp" style="background-color: #f8f8f8; background-position: initial initial; background-repeat: initial initial; border: 1px solid rgb(204, 204, 204); color: black; display: block; padding: 5px;"><span class="keyword" style="font-weight: bold;">int</span> * p = <span class="keyword" style="font-weight: bold;">static_cast</span><<span class="keyword" style="font-weight: bold;">int</span>*>(malloc(<span class="number" style="color: #008800;">100</span>));</code></pre><span style="background-color: white; color: #333333; font-family: Georgia, serif; font-size: 13px;">Если приведение не удалось, возникнет ошибка на этапе компиляции. Однако, если это приведение между указателями на объекты классов вниз по иерархии и оно не удалось, результат операции&nbsp;</span><code style="background-color: white; color: #333333;">undefined</code><span style="background-color: white; color: #333333; font-family: Georgia, serif; font-size: 13px;">. То есть, возможно такое приведение:&nbsp;</span><code style="background-color: white; color: #333333;">static_cast<Derived*>(pBase)</code><span style="background-color: white; color: #333333; font-family: Georgia, serif; font-size: 13px;">, даже если&nbsp;</span><code style="background-color: white; color: #333333;">pBase</code><span style="background-color: white; color: #333333; font-family: Georgia, serif; font-size: 13px;">&nbsp;не указывает на</span><code style="background-color: white; color: #333333;">Derived</code><span style="background-color: white; color: #333333; font-family: Georgia, serif; font-size: 13px;">, но программа при этом будет вести себя странно.</span></div>