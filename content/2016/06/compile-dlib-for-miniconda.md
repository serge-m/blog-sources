Title: compile dlib for miniconda
Author: SergeM
Date: 2016-06-25 22:43:00
Slug: compile-dlib-for-miniconda
Tags: 

<div dir="ltr" style="text-align: left;" trbidi="on">Activate miniconda environment (my environment is called py3):
<div>source activate py3</div><div>
</div><div>Produce initial steps from the readme:</div><div><pre class="code_box" style="background: rgb(240, 240, 240); border-color: black; border-style: dotted solid solid dotted; border-width: 1px 2px 2px 1px; font-size: 17px; line-height: 22.1px; margin: 1em 0.25in; padding: 0.5em;">cd examples
mkdir build
cd build
cmake ..
cmake --build . --config Release</pre>
inside function &nbsp;build_dlib() of file setup.py add the highlighted code:</div><div><div>&nbsp; &nbsp;<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"> &nbsp;<span style="font-size: xx-small;"> &nbsp; if platform_arch == '64bit' and sys.platform == "win32":</span></span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # 64bit build on Windows</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">
</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.................. bla bla ...................</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">
</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for ext in [py_ver.replace(".", "") + '.lib', py_ver + 'mu.lib', py_ver + 'm.lib', py_ver + 'u.lib']:</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; py_lib = os.path.abspath(os.path.join(inc_dir, '../libs/', 'python' + ext))</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if os.path.exists(py_lib):</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cmake_extra_arch += ['-DPYTHON_LIBRARY={lib}'.format(lib=py_lib)]</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; &nbsp; &nbsp; else:</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #cc0000;">&nbsp; cmake_extra_arch += ['-DPYTHON_LIBRARY=/home/user/miniconda/envs/py3/lib/libpython3.so']</span></span></div><div><span style="color: #cc0000; font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cmake_extra_arch += ['-DPYTHON_INCLUDE_DIR=/home/user/miniconda/envs/py3/include/python3.5m']</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">
</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">
</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; &nbsp; &nbsp; build_dir = os.path.join(script_dir, "./tools/python/build")</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; &nbsp;......................bla bla.....................................</span></div></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">
</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">
</span></div>Replace /home/user/miniconda by your path to miniconda
<div>
Run python setup.py install (as usual)</div></div>